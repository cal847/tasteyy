{% extends 'registration/base.html' %}

{% block title %}Set New Password{% endblock %}

{% block content %}
<div class="login-container">
    <h3>Set New Password</h3>
    <div class="body">
        {% if validlink %}
            <form method="post">
                {% csrf_token %}

                <label for="{{ form.new_password1.id_for_label }}">New Password</label>
                {{ form.new_password1 }}

                {% if form.new_password1.errors %}
                    <div class="field-error">
                        {{ form.new_password1.errors }}
                    </div>
                {% endif %}

                <label for="{{ form.new_password2.id_for_label }}">Confirm New Password</label>
                {{ form.new_password2 }}

                {% if form.new_password2.errors %}
                    <div class="field-error">
                        {{ form.new_password2.errors }}
                    </div>
                {% endif %}

                <button type="submit" class="btn">Save New Password</button>
            </form>
        {% else %}
            <p class="field-error">
                The password reset link is invalid or has expired.
                <br><br>
                <a href="{% url 'accounts:password_reset' %}">Request a new reset link</a>
            </p>
        {% endif %}

        <p><a href="{% url 'accounts:login' %}">‚Üê Back to Login</a></p>
    </div>
</div>
{% endblock %}